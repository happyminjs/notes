### 优化方法
##### 渲染过程
* 减少重绘和回流
```
1、使用 transform 替代 top
2、使用 visibility 替换 display: none ，因为前者只会引起重绘，后者会引发回流（改变了布局）
3、不要把节点的属性值放在一个循环里当成循环里的变量
4、不要使用 table 布局，可能很小的一个小改动会造成整个 table 的重新布局
5、动画实现的速度的选择，动画速度越快，回流次数越多
```
* 懒加载，优化首屏展示
* css： 扁平层级，优化选择器
##### 网络相关
* 合适的缓存策略: 强缓存 协商缓存
```js

```
* 应用CDN，并行加载更多资源。因为浏览器对于单个域名有并发请求上限
* DNS 预解析： 通过预解析的方式来预先获得域名所对应的 IP
```html
<!-- href 配置要预解析的域名 -->
<link rel="dns-prefetch" href="//www.ym.cn" />
```
* 预加载： 强制浏览器请求资源，并且不会阻塞 onload 事件
```js
<link rel="preload" href="http://example.com">
// 可以一定程度上降低首屏的加载时间，
// 因为可以将一些不影响首屏但重要的文件延后加载，
// 唯一缺点就是兼容性不好
```
* 预渲染: 将下载的文件预先在后台渲染
```js
<link rel="prerender" href="http://example.com" />
// 要确保该页面百分百会被用户在之后打开，否则就白白浪费资源去渲染
```
##### 文件优化
* 雪碧图、小图使用base64、正确图片格式
* 文件大小合理控制
* css放head 中，script 标签放在 body 标签底部
##### 其他
* 模块化，提取公用模块
* 节流
* 防抖
* 使用 Webpack 优化项目
```
1、对于 Webpack4，打包项目使用 production 模式，这样会自动开启代码压缩
2、使用 ES6 模块来开启 tree shaking，这个技术可以移除没有使用的代码
3、优化图片，对于小图可以使用 base64 的方式写入文件中
4、按照路由拆分代码，实现按需加载
5、给打包出来的文件名添加哈希，实现浏览器缓存文件
```
-----------
### 浏览器渲染原理
###### 1、HTML 文件并转换为 DOM 树
* 字节数据转为字符串
```
网络中传输的内容其实都是 0 和 1 这些字节数据，将这些字节数据转换为字符串，也就是我们写的代码。
```
* 字符串转为标记（这一过程叫标记化）
```
标记还是字符串，是构成代码的最小单位。
这一过程会将代码分拆成一块块，并给这些内容打上标记，便于理解这些最小单位的代码是什么意思。
看下图就是一个标记：
```
<image src="/imgs/html_token" width=350></image>
* 标记转换为 Node
* Node 会根据不同 Node 之前的联系构建为一颗 DOM 树
<image src="/imgs/html-node" width=400></image>
###### 2、CSS 文件转换为 CSSOM 树
* 字节数据转为字符串
* 字符串转为标记
* 标记转换为 Node
* Node 之前的联系构建为一颗 CSSOM 树

###### 3、生成渲染树
* 将生成的 DOM 树和 CSSOM 树，组合为渲染树。
```
渲染树只会包括需要显示的节点和这些节点的样式信息，
如果某个节点是 display: none 的，那么就不会在渲染树中显示。
```
* 根据渲染树来进行布局（也可以叫做回流）
* 调用 GPU 绘制，合成图层，显示在屏幕上

###### 延伸题： 插入几万个 DOM，如何实现页面不卡顿？
* requestAnimationFrame 的方式去循环的插入 DOM
* 只渲染可视区域内的内容，非可见区域的那就完全不渲染了，当用户在滚动的时候就实时去替换渲染的内容
--------------
### 一个URL都发生了什么

### 介绍项目：从框架、框架间交互方式、同步异步
### 懒加载原理
### 移动端click延迟处理
300ms的延迟，是为了检查用户是否在做双击。
fastclick
原理还是应用的touch
https://segmentfault.com/a/1190000015154809?utm_source=tag-newest
### DOMContentLoaded 与 load 
先来认识一下两种load
* DOMContentLoaded
* Load
* jquery中的load方法原理是监测的DOMContentLoaded事件。常使用的方法 
```js
$(document).ready(function() { // ...代码... })
```

### 图片加载 onload
### readystatechange(加载状态)
### 碰到过哪些问题
* 微信给小程序分配内存有限，在复杂操作的时候导致小程序崩溃，sku切换
```
原因：当时sku给的是数组格式的（历史问题），每次切换sku都要遍历很大的数组，导致小程序崩溃。
方案：进入页面的时候遍历一次数组，将数组转为对象格式，这样只需要遍历一次就好，之后切换sku只需要直接根据sku的key直接取值即可。
```
* 58APP使用的WKwebview，老版的Safari做的限制，滚动中不执行js，导致动态设置样式如吸顶的时候闪现
```
方案： 在ios上使用 css 定位： position:sticky; 
```
* 移动端 1px 边框的问题
```
使用0.5px，部分手机上回丢失底边框或者右边框
使用 after伪元素 + transform：scale(0.5)
其实这个0.5不是严格的1px，只是细了而已
```
* ios 返回 不刷新页面，安卓刷新页面，数据变更、状态保存
* 移动端底部有固定按钮，页面有输入框时
```
监测focus事件，或者监测window.resize事件，控制底部按钮的隐藏和显示
底部固定的输入框： 修改fixed布局为absolute
```
* 只有联通网络时，页面访问失败
  联通的缓存数据出错，cdn缓存出错
* 微信将video标签层级设置最高，不能在上边添加遮盖元素。
* ios微信内不能自动播放音视频，可以在微信提供的WeixinJSBridgeReady事件中播放。
```
document.addEventListener('WeixinJSBridgeReady', function() {
  ...
  audio.play();
  ...
}, false)
```
* 微信支付报错，是因为微信在另一个手机上登录，上一个手机上的账号没有踢下线
* 微信限制： 复制到剪贴板上的图片，之前公司的图片就不能复制到输入框
  换了公司cdn就可以了，具体原因不明
* 应用tips：列表里边的多个标签展示个数问题
* webpack 的版本问题，坑啊。dev启动不起来，报个什么 .call 的错误
